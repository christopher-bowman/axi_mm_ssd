\documentclass{report}
\usepackage[pdftitle={AXI Memory Mapped Seven Segment Display},colorlinks=true,urlcolor=blue,breaklinks=true]{hyperref}
\usepackage{register}
\title{AXI Memory Mapped Seven Segment Display}
\author{Christopher R. Bowman}
\date{16 Jan 2023}
\begin{document}
\maketitle
\tableofcontents
\listoftables
\pagebreak
\pagestyle{headings}
\chapter{Introduction}
This project implements a memory mapped register interface to the 
\href{https://digilent.com/reference/pmod/pmodssd/reference-manual?redirect=1}
{Digilent PmodSSD} seven segment display connected to the the PMOD ports on the
\href{https://digilent.com/shop/arty-z7-zynq-7000-soc-development-board/}
{Digilent Arty Z7-20} board which is based on the
\href{http://www.xilinx.com/products/spartan6/index.htm} {Xilinx Zynq FPGA}.
A git repository is located on
\href{https://gihub.com/}
{github}.
The project is targeted at the Xilinx Vivado 2022.1 Design Suite.

\chapter{Licensing}
All materials in the repository are Copyright \copyright\ 2023 by
Christopher R. Bowman and all rights are reserved.

Under no circumstances should anything be committed to the
project respository containting copyrighted material which is
owned by a third party.

At some point this project may move to a more permissive licenses.
At present, however, all contributions will have to either donate
the code and copyright or include a world wide, unrestricted
license including the right to create and distribute derivitive
works and sublicense the orignal and derivitive works.

\chapter{Required Software}
Xilinx Vivado 2022.1 Design Suite

Linux (Fedora 14)

FreeBSD (Drivers are QAed for 13.1)

GNU Make

Latex

dvips

dvipdf

tetex

latex register packge

\chapter{Repository File Organization}

\chapter{Resources}
The following paragraphs provide links to important resources of
relevance to this project as most materials are copyrighted and
cannot be distributed or included in the project git repostories.
It is recommended that you visit the links, download the materials
and keep a local copy for your use.

The board used for this project is the 
\href{https://digilent.com/shop/arty-z7-zynq-7000-soc-development-board/}
{Digilent Arty Z7-20}
available from Digilent.  Documentation for this board can be found on the
\href{https://digilent.com/reference/programmable-logic/arty-z7/reference-manual?redirect=1}
{Arty Z7 Reference Manual} web page. 

The \href{http://www.xilinx.com/products/spartan6/index.htm}
{Xilinx Zynq FPGA} contained on the board is documented in a variety
of manuals.  Of particular interest is the
\href{https://docs.xilinx.com/v/u/en-US/ug585-Zynq-7000-TRM}
{Zynq-7000 SoC Technical Reference Manual UG585}.

The 
\href{https://digilent.com/reference/pmod/pmodssd/reference-manual?redirect=1}
{PmodSSD} seven segment display also comes from Digilent.

\chapter{Connection}
For this design the
\href{https://digilent.com/reference/pmod/pmodssd/reference-manual?redirect=1}
{PmodSSD} should be inserted in the Arty board which is face up.
The \href{https://digilent.com/reference/pmod/pmodssd/reference-manual?redirect=1}
{PmodSSD} should be have the segments up and should be inserted into the lower
pins of the JA and JB PMOD connectors.


\chapter{Programming}
Insert the SD card with the image and at the U-Boot prompt enter the following
commands:

\texttt{fatload mmc 0 400000 bit/ssd\_top.bit}

\texttt{fpga loadb 0 400000 \textit{size}}

Alternatively one can run the following command as root:
\texttt{xbit2bin \textit{fpga.bit}} where \texttt{\textit{fpga.bit}} is the
FPGA bitsream file generated by the Xilinx tools.

\chapter{Register Specifcation}
This design has 4 32-bit registers which identify the hardware and allow control
of the seven segments of each of the two displays.  The regsiter map is shown in
Table~\ref{table:bar0regmap} on page
~\pageref{table:bar0regmap}.  

\begin{table}[h]
\begin{tabular}{||l|l||}
\hline
 0x0000 & IP Identification register\\
\hline
 0x0004 & Right digit controller register \\
\hline
 0x0008 & Left digit controller register \\
\hline
 0x000C & Reserved \\
\hline
\end{tabular}
\caption{Register Map}
\label{table:bar0regmap}
\end{table}



\begin{register}{h}{IP Identification}{0x0000}% name=CONFIG
\label{ID}%
\regfield{ID}{32}{0}{0xFEEDFACE}% STATUS
\reglabel{Reset}\regnewline%
\begin{regdesc}\begin{reglist}[Request~Depth]
\item [ID](Read only) Containts the constant 0xFEEDFACE 
\end{reglist}\end{regdesc}\end{register}

\begin{register}{h}{Right Digit}{0x0004}% name=CONFIG
\label{RD}%
\regfield{RESERVED}{26}{7}{0}%
\regfield{AA}{1}{6}{0}%
\regfield{AB}{1}{5}{0}%
\regfield{AC}{1}{4}{0}%
\regfield{AD}{1}{3}{0}%
\regfield{AE}{1}{2}{0}%
\regfield{AF}{1}{1}{0}%
\regfield{AG}{1}{0}{0}%
\reglabel{Reset}\regnewline%
\begin{regdesc}\begin{reglist}[Request~Depth]
\item [AA]Setting this bit enables the right AA segment
\item [AB]Setting this bit enables the right AB segment
\item [AC]Setting this bit enables the right AC segment
\item [AD]Setting this bit enables the right AD segment
\item [AE]Setting this bit enables the right AE segment
\item [AF]Setting this bit enables the right AF segment
\item [AG]Setting this bit enables the right AG segment
\end{reglist}\end{regdesc}\end{register}

\begin{register}{h}{Left Digit}{0x0008}% name=CONFIG
\label{LD}%
\regfield{RESERVED}{26}{7}{0}%
\regfield{AA}{1}{6}{0}%
\regfield{AB}{1}{5}{0}%
\regfield{AC}{1}{4}{0}%
\regfield{AD}{1}{3}{0}%
\regfield{AE}{1}{2}{0}%
\regfield{AF}{1}{1}{0}%
\regfield{AG}{1}{0}{0}%
\reglabel{Reset}\regnewline%
\begin{regdesc}\begin{reglist}[Request~Depth]
\item [AA]Setting this bit enables the left AA segment
\item [AB]Setting this bit enables the left AB segment
\item [AC]Setting this bit enables the left AC segment
\item [AD]Setting this bit enables the left AD segment
\item [AE]Setting this bit enables the left AE segment
\item [AF]Setting this bit enables the left AF segment
\item [AG]Setting this bit enables the left AG segment
\end{reglist}\end{regdesc}\end{register}


\begin{register}{h}{RESERVED}{0x000C}% name=CONFIG
\label{RES}%
\regfield{RESERVED}{32}{0}{0}%
\reglabel{Reset}\regnewline%
\begin{regdesc}\begin{reglist}[Request~Depth]
\item [RESERVED] (Read only) This registers is reserved and always read as 0x0
\end{reglist}\end{regdesc}\end{register}

\end{document}
